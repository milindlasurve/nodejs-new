#!/usr/bin/env node

/**
 * @author Girijashankar Mishra
 * @version 1.0.0
 * @since 20-August-2019
 */

const MongoClient = require('mongodb').MongoClient

// Get Connsection String and Database Name from the environment variables set while 
// running the application server.
const DB_URI = process.env.connectionString + process.env.dbName;

function connect(url) {
    return MongoClient.connect(url).then(client => client.db())
}

module.exports = async function() {
    let databases = await Promise.all([connect(DB_URI), connect(MKTG_URI)])
   
    return {
      production: databases[0],
      marketing: databases[1]
    }
}